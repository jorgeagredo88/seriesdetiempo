[["remesas.html", "Series de tiempo - Remesas 1 REMESAS 1.1 INTRODUCCIÓN 1.2 BASE DE DATOS", " Series de tiempo - Remesas Analisis de Series de Tiempo Grupo 5 - William Contreras, Camilo Espinoza, Jorge Agredo 2024-11-25 1 REMESAS 1.1 INTRODUCCIÓN Las remesas son transferencias de dinero realizadas principalmente por emigrantes a sus familiares o relacionados en su país de origen. En este proceso participan los siguientes actores: remitente (persona que desde el país de origen se acerca a un agente para enviar un determinado monto), el agente en el lugar de origen (oficina donde se inicia la operación financiera), la empresa de transferencia de dinero (empresa que hace el traslado del monto del país de origen al país destino), el agente en el lugar de pago (oficina donde se realiza el desembolso del dinero) y el receptor (persona que en el país de destino recibe el dinero). Las transferencias entre la empresa de transferencia y los agentes se realizan en dólares, y las tasas de cambio se fijan en la fecha de origen de la transacción con una tasa de referencia establecida para cada país. Esto significa que todas las transacciones iniciadas en el día  se pagarán según la tasa de referencia correspondiente a ese día. Esto genera un desafío para los agentes en el lugar de pago, dado que la tasa de pago asociada a las operaciones es informada al remitente y se fija según la tasa de referencia vigente en la fecha de origen y se mantiene inalterada hasta que el giro es cobrado. Existe una exposición a la volatilidad de la tasa de cambio entre el día inicial de la transacción y la fecha de cobro. Estas transacciones se identifican el día en que se realiza el pago al receptor, momento en que la tasa de mercado a la que el agente de pago convierte a moneda local los dólares recibidos por la empresa de transferencia de dinero puede haber variado con relación a la tasa de cambio con la que se fijó la conversión al momento de la originación de la remesa. En resumen, hay transacciones pagadas en el día  que tienen como referencia una tasa de cambio de un día diferente, y el agente del lugar de pago puede monetizar (convertir de dólares a pesos colombianos) a la tasa del día . De esta forma, en escenarios de revaluación del peso colombiano, es decir, caídas en la tasa de cambio, se generarían menores ingresos o pérdidas por concepto de monetización de dólares, materializándose el riesgo cambiario. Este proceso se ve afectado por las celebraciones especiales en cada uno de los países, tales como día de amor y amistad, día de la madre, navidad, etc. 1.2 BASE DE DATOS Según lo expuesto anteriormente, se identifican las siguientes variables para el conjunto de datos provisto por una entidad que realiza remesas en Colombia bajo acuerdo de confidencialidad: Fecha de pago. Canal. Pais de Origen. Número de transacciones. Fecha de origen. Monto en dolares. Monto en Pesos. En relación con la importancia de analizar esta información enfocado en la variable tiempo se puede decir que; el análisis de las variables de tipo fecha (Fecha origen de la operación y Fecha de pago) es crucial debido a la volatilidad de las tasas de cambio entre el día en que se origina la remesa y el día en que se paga. Por otra parte, el pronóstico del monto total a pagar en remesas es esencial para mitigar este riesgo, permitiendo anticipar posibles pérdidas por variaciones en la tasa de cambio y tomar decisiones informadas sobre cobertura y gestión del riesgo. Inicialmente los datos comprenden el periodo entre el primero de enero de 2023 hasta el 10 de octubre de 2024 de forma díaria, pero se irá aumentando los datos en la medida que la empresa entregue la información. "],["descripción-de-las-series-de-tiempo.html", "2 DESCRIPCIÓN DE LAS SERIES DE TIEMPO 2.1 Serie de tiempo por Fecha de Pago 2.2 Serie de tiempo por Fecha de Origen", " 2 DESCRIPCIÓN DE LAS SERIES DE TIEMPO A continuación se presenta la base incluyendo la variable en el tiempo, la aproximación en promedios móviles, en rezagos y en estacionalidad. Todo lo anterior, a través de funciones y gráficas que permitan detectar patrones y ciclos de la variable. ## Rows: 530,300 ## Columns: 7 ## $ Fecha_Pago &lt;date&gt; 2023-01-01, 2023-01-01, 2023-01-01, 2023-01-01, 2023-01-01, 202… ## $ Pais_Origen &lt;chr&gt; &quot;AE&quot;, &quot;AE&quot;, &quot;AT&quot;, &quot;AU&quot;, &quot;AU&quot;, &quot;BE&quot;, &quot;BE&quot;, &quot;BR&quot;, &quot;BR&quot;, &quot;BR&quot;, &quot;BR&quot;… ## $ Fecha_Origen &lt;date&gt; 2022-12-31, 2023-01-01, 2023-01-01, 2022-12-31, 2023-01-01, 202… ## $ Canal &lt;chr&gt; &quot;APN&quot;, &quot;APN&quot;, &quot;APN&quot;, &quot;APN&quot;, &quot;APN&quot;, &quot;RedPropia&quot;, &quot;APN&quot;, &quot;APN&quot;, &quot;R… ## $ Numero_transacciones &lt;dbl&gt; 1, 3, 3, 3, 18, 1, 1, 12, 2, 35, 1, 2, 2, 17, 2, 1, 1, 1, 22, 1,… ## $ Monto_USD &lt;dbl&gt; 369.33, 471.03, 1146.18, 1781.49, 13945.66, 48.23, 418.29, 2206.… ## $ Monto_COP &lt;dbl&gt; 1765896, 2252157, 5480357, 8518037, 66679489, 230602, 2000000, 1… Como se puede observar en la tabla resumen la base de datos se compone de 7 variables: 2 tipo fecha: “Fecha_pago” y “Fecha_Origen”, 3 numericas: “Número_transacciones”, “Monto_USD” y “Monto_COP” y 2 tipo texto: “Pais_Origen” y “Canal”. Con el objetivo de observar el comportamiento de las remesas en el tiempo, se realizará la descripción por las dos variables tipo fecha. 2.1 Serie de tiempo por Fecha de Pago Se agrupa el monto en dólares por la variable objetivo. Datos_FP &lt;- aggregate(Monto_USD ~ Fecha_Pago, data = Datos, sum) Se verifica el tipo de variable. ## [1] &quot;ts&quot; La fecha inicial ## [1] 2023 1 La fecha final ## [1] 2024 284 Se puede evidenciar que comienza el día 1 del 2023 y finaliza el día 284 del año 2024. Se valido que las fechas fueran consecutivas y no existieran fechas faltantes. fecha_min &lt;- min(Datos_FP$Fecha_Pago) fecha_max &lt;- max(Datos_FP$Fecha_Pago) fechas_completas &lt;- seq(from = fecha_min, to = fecha_max, by = &quot;day&quot;) fechas_faltantes &lt;- setdiff(fechas_completas, Datos_FP$Fecha_Pago) fechas_faltantes ## numeric(0) A continuación se realiza el gráfico del monto en dólares por fecha de pago. 2.1.1 Uso de la librería “XTS” A pesar de conocer que la base es regular con periodicidad diaria, se decidió usar la libreria “XTS” por la utilización de las fechas exactas. # Crear la serie de tiempo serie_xts &lt;- xts(Datos_FP$Monto_USD, order.by = Datos_FP$Fecha_Pago) head(serie_xts) ## [,1] ## 2023-01-01 314473.1 ## 2023-01-02 4700346.1 ## 2023-01-03 6069974.1 ## 2023-01-04 6164948.9 ## 2023-01-05 6986643.0 ## 2023-01-06 6616416.0 2.1.2 Gráfico de rezago para la serie de tiempo Según la gráfica parece que existe algo de autocorrelación hasta el rezago 4, para mayores rezagos esa relación se vuelve más difusa. 2.1.3 Promedios móviles 2.1.3.1 Promedio Móvil Simple (SMA) El promedio móvil simple es una técnica estadística utilizada para suavizar series de tiempo mediante la creación de un promedio de los valores en un intervalo específico de tiempo. Permite facilitar la identificación de tendencias subyacentes al hacer que las variaciones estacionales y aleatorias sean menos evidentes. Una de sus ventajas es que proporciona una visión clara de la tendencia general de los datos a lo largo del tiempo. SMA se usa principalmente en análisis financiero, como en el seguimiento de precios de acciones, proyecciones de ventas, y otras métricas de negocio. 2.1.3.2 Promedio Móvil Exponencial (EMA). Es similar al promedio móvil simple (SMA), pero con un enfoque que da más peso a los datos más recientes. Este puede ser más representativo de la tendencia actual en series de tiempo con alta volatilidad. Se aplica en diversas áreas de análisis de datos, como en el monitoreo de ventas, pronósticos de demanda, y otros indicadores de rendimiento. En las gráficas se puede observar como los promedios eliminan el ruido de los picos ocasionados los días de fin de semana, donde se realizan menos pagos de remesas sabados, domingos y festivos y mayores pagos en los días viernes. 2.2 Serie de tiempo por Fecha de Origen Se agrupa el monto en dólares por la variable objetivo. Datos_FO &lt;- aggregate(Monto_USD ~ Fecha_Origen, data = Datos, sum) 2.2.1 Uso de la librería “XTS” Por ser una base irregular con periodicidad diaria, se decidió usar la libreria “XTS” por la utilización de las fechas exactas. # Crear la serie de tiempo serie_xts1 &lt;- xts(Datos_FO$Monto_USD, order.by = Datos_FO$Fecha_Origen) head(serie_xts1) ## [,1] ## 2018-11-20 658.18 ## 2019-02-04 253.15 ## 2019-05-22 405.03 ## 2019-08-10 250.02 ## 2019-12-13 598.19 ## 2020-02-24 20.70 Se pueden obvervar casos atipicos desde 20 de noviembre de 2018, que corresponden a remesas que fueron reclamadas muy posteriormente a la originación, ya que las fechas de pago estan desde el 01 de octubre de 2023, y que debieron surtir un proceso especial. Se procede a realizar la limpieza de datos atipicos, dejando unicamente las remesas que hayan sido originadas hasta 30 dias antes del pago: 2.2.2 Gráfico de rezago para la serie de tiempo Según las gráficas parece al igual que en el analisis con fecha de pago, que existe algo de autocorrelación en los primeros rezagos, pero para mayores rezagos esa relación se vuelve más difusa. 2.2.3 Promedios móviles 2.2.3.1 Promedio Móvil Simple (SMA) 2.2.3.2 Promedio Móvil Exponencial (EMA). En las gráficas se puede observar como los promedios eliminan el ruido de los picos ocasionados los días de fin de semana, donde se realizan menos pagos de remesas sabados, domingos y festivos y mayores pagos en los días viernes. "],["preprocesamiento-y-visualizacion.html", "3 PREPROCESAMIENTO Y VISUALIZACION 3.1 Descomposición de la serie temporal - Serie de tiempo por Fecha de Pago 3.2 Función de Autocorrelación (ACF) y Función de Autocorrelación Parcial (PACF) 3.3 Componentes de la Descomposición 3.4 Modelo ARIMA 3.5 Punto de cambio de la serie de tiempo 3.6 Predicciones del Modelo ARIMA 3.7 Validaciones", " 3 PREPROCESAMIENTO Y VISUALIZACION 3.1 Descomposición de la serie temporal - Serie de tiempo por Fecha de Pago 3.1.1 Estacionariedad En el primer paso se verifica que la serie sea estacionaria a traves de la prueba Dickey-Fuller Aumentada (ADF). ## ## Augmented Dickey-Fuller Test ## ## data: serie_xts ## Dickey-Fuller = -7.4395, Lag order = 8, p-value = 0.01 ## alternative hypothesis: stationary El resultado de la prueba Dickey-Fuller Aumentada (ADF) tiene un p-valor de 0.01, lo cual indica que la serie es estacionaria por lo cual no requiere realizar una diferenciación en la serie. Estadístico de Dickey-Fuller = -7.4: Este es el valor calculado para el estadístico de prueba. Un valor más negativo tiende a indicar estacionariedad, ya que refuerza el rechazo de la hipótesis nula de no estacionariedad. p-value = 0.01: Este p-valor es bajo (generalmente menor a 0.05 es un umbral común para significancia). Dado que el p-valor es 0.01, puedes rechazar la hipótesis nula de no estacionariedad con un 99% de confianza. Esto significa que hay una fuerte evidencia de que tu serie es estacionaria. Alternative hypothesis: stationary: La hipótesis alternativa de la prueba es que la serie es estacionaria. Dado que el p-valor es bajo, este resultado respalda la hipótesis alternativa, indicando estacionariedad. En resumen, se puede concluir concluir que la serie es estacionaria con un nivel de confianza alto. Esto significa que sus propiedades estadísticas, como la media y la varianza, se mantienen constantes a lo largo del tiempo, lo cual es un buen punto de partida para aplicar modelos de series de tiempo como ARIMA, que asumen estacionariedad. 3.2 Función de Autocorrelación (ACF) y Función de Autocorrelación Parcial (PACF) A partir de estos gráficos podemos observar cómo los valores de la serie temporal están fuertemente correlacionados con sus propios valores, con valores altos en los rezagos 7 y 1, lo que significa que podria existir una relación directa y fuerte cada 7 días y con el día anterior, lo que podria sugerir un patón estacional semanal. Dado estas observaciones se podria considerar un modelo con un componente AR de orden 1 y una estacionalidad de 7 periodos. 3.3 Componentes de la Descomposición A partir de los gráficos anteriores se puede establecer que la serie tiene una tendencia creciente que sugiere un aumento en el valor de las remesas en dólares a lo largo del tiempo. La estacionalidad es clara y repetitiva, lo que indica un patrón cíclico que se mantiene constante en intensidad y el residuo muestra variaciones adicionales, algunas de las cuales pueden corresponder a eventos aleatorios o no modelados. 3.4 Modelo ARIMA A partir de la información anterior, se contruyó un modelo ARIMA con una estacionalidad de 7 periodos. ## Series: serie_xtsp ## ARIMA(1,0,0)(2,1,0)[7] with drift ## ## Coefficients: ## ar1 sar1 sar2 drift ## 0.2815 -0.6143 -0.3077 5326.433 ## s.e. 0.0381 0.0377 0.0378 6623.015 ## ## sigma^2 = 2.614e+12: log likelihood = -10088.61 ## AIC=20187.21 AICc=20187.31 BIC=20209.54 ## ## Training set error measures: ## ME RMSE MAE MPE MAPE MASE ACF1 ## Training set -1837.392 1603135 1080672 -8.664026 21.83807 0.7725551 -0.03796145 Modelo ARIMA(1,0,0)(2,1,0)[7] con drift Coeficientes del Modelo Los coeficientes estimados del modelo son: AR(1) = 0.2815: El coeficiente autorregresivo de primer orden indica que el valor actual de la serie está influenciado en un 28.15% por su valor anterior inmediato. SAR(1) = -0.6143 y SAR(2) = -0.3077: Estos son los coeficientes de los componentes autorregresivos estacionales de primer y segundo orden, aplicados en ciclos de 7 periodos. Un valor negativo sugiere que existe una correlación inversa entre los valores actuales y los valores de hace 7 y 14 periodos, lo cual es típico de series con patrones estacionales donde los valores tienden a “compensarse” con valores de periodos anteriores. Drift (Tendencia) = 5326.433: El drift indica una tendencia general en la serie hacia un crecimiento en promedio de 5326.433 unidades por periodo. La presencia de este valor significa que la serie presenta una tendencia al alza que no es capturada completamente por los componentes AR y SAR. -Errores Estándar (s.e.): Cada coeficiente tiene un error estándar asociado, lo cual indica la precisión de la estimación. Errores estándar bajos (como los de este modelo) sugieren estimaciones confiables. Medidas de Bondad de Ajuste -sigma^2 = 2.614e+12: Es la varianza residual del modelo, una medida de la dispersión de los residuos. Cuanto más bajo es este valor, mejor es el ajuste del modelo. -Log likelihood = -10088.61: Este es el logaritmo de la verosimilitud del modelo. Modelos con mayor (menos negativo) log-likelihood generalmente se ajustan mejor a los datos. AIC = 20187.21, AICc = 20187.31, BIC = 20209.54: Estas son métricas de información que penalizan la complejidad del modelo. En general, valores más bajos de AIC y BIC sugieren un mejor equilibrio entre ajuste y simplicidad del modelo, en comparación con otros modelos. Medidas de Error en el Conjunto de Entrenamiento Estas medidas reflejan el error promedio del modelo en el conjunto de datos de entrenamiento: -ME (Mean Error) = -1837.392: Un valor cercano a 0 indica que el modelo no tiene un sesgo significativo. En este caso, el error medio es bajo y negativo, lo que sugiere un ligero sesgo hacia subestimar los valores. -RMSE (Root Mean Squared Error) = 1603135: Representa la magnitud promedio del error, penalizando más los errores grandes. Un valor más bajo indica un mejor ajuste del modelo. -MAE (Mean Absolute Error) = 1080672: La media de los errores absolutos. Este es el error promedio sin considerar el signo del error, y sugiere el error medio absoluto del modelo. -MPE (Mean Percentage Error) = -8.664%: El porcentaje de error medio muestra que el modelo, en promedio, subestima los valores en un 8.66%. -MAPE (Mean Absolute Percentage Error) = 21.84%: Este valor indica que, en promedio, el modelo tiene un error del 21.84% respecto a los valores reales. Valores de MAPE menores al 20% suelen considerarse buenos, por lo que un 21.84% indica un ajuste razonable. -MASE (Mean Absolute Scaled Error) = 0.7726: Este valor compara el MAE del modelo con el de un modelo naive (que asume que los valores actuales son iguales a los anteriores). Un valor menor a 1 indica que el modelo se desempeña mejor que el modelo naive. -ACF1 = -0.03796: La autocorrelación en el primer desfase de los residuos es cercana a 0, lo cual sugiere que el modelo ha capturado bien la autocorrelación en la serie y que los residuos son, en gran medida, ruido blanco (es decir, no tienen patrones de autocorrelación significativos). En general este modelo ARIMA(1,0,0)(2,1,0)[7] con drift tiene un ajuste razonable para la serie, los residuos muestran poca autocorrelación (ACF1 cercano a 0), lo cual es un buen indicio. La presencia de un componente de drift (tendencia) sugiere un aumento constante en la serie, que el modelo trata de capturar. Las métricas de error como el RMSE, MAPE y MASE son razonablemente bajas, lo cual sugiere un ajuste decente, aunque aún podría mejorarse para reducir el MAPE. 3.5 Punto de cambio de la serie de tiempo ## Created Using changepoint version 2.2.4 ## Changepoint type : Change in mean ## Method of analysis : AMOC ## Test Statistic : Normal ## Type of penalty : MBIC with value, 19.4263 ## Minimum Segment Length : 1 ## Maximum no. of cpts : 1 ## Changepoint Locations : 456 Segn los resultados obtenidos, se detectó un punto de cambio en la serie de tiempo. Changepoint type: Define el tipo de cambio detectado. En este caso, es un cambio en la media de la serie (Change in mean), lo que implica que la función cpt.mean buscó variaciones significativas en el nivel promedio de los datos. Method of analysis: AMOC: El método AMOC (At Most One Change) implica que el análisis se ha limitado a identificar solo un posible cambio en la serie de tiempo. Test Statistic: Normal: La estadística de prueba utilizada para detectar el cambio es el test de normalidad, adecuado para datos que siguen una distribución normal. Type of penalty: MBIC with value, 19.4263: La penalización aplicada es la MBIC (Modified Bayesian Information Criterion), que ayuda a determinar la ubicación del cambio sin sobreajustar el modelo. El valor específico de esta penalización fue 19.4263, lo cual afecta el número de cambios detectados al favorecer soluciones con menos cambios. Minimum Segment Length: 1: Indica que la longitud mínima de un segmento entre los puntos de cambio es 1. Es decir, el análisis considera que el cambio puede ocurrir incluso en segmentos de un solo punto. Maximum no. of cpts: 1: Se limitó el número máximo de puntos de cambio a 1, lo cual es consistente con el método AMOC usado en el análisis. Changepoint Locations: 456: El único punto de cambio detectado se encuentra en la posición 456 de la serie de tiempo. Esto significa que se encontró un cambio significativo en la media en esa posición específica de la serie. 3.6 Predicciones del Modelo ARIMA Como parte del ejercicio se realiza la predicción de 12 días. ## Point Forecast Lo 80 Hi 80 Lo 95 Hi 95 ## 93.71429 9189632 7117496.1 11261768 6020573.7 12358690 ## 93.85714 7602795 5450134.5 9755456 4310584.8 10895005 ## 94.00000 2702625 543712.3 4861537 -599146.9 6004396 ## 94.14286 9665693 7506285.8 11825100 6363164.8 12968221 ## 94.28571 9868239 7708793.1 12027685 6565651.4 13170827 ## 94.42857 9326637 7167187.8 11486086 6024044.4 12629230 ## 94.57143 9242555 7083105.4 11402004 5939961.9 12545148 ## 94.71429 9558880 7256181.8 11861579 6037206.8 13080554 ## 94.85714 7797606 5483937.2 10111276 4259154.7 11336058 ## 95.00000 2817606 503069.5 5132142 -722172.0 6357383 ## 95.14286 9979586 7664980.6 12294190 6439702.8 13519468 ## 95.28571 10440257 8125646.5 12754867 6900365.8 13980148 3.7 Validaciones 3.7.1 Outliers 3.7.2 Supuestos de una ARIMA 3.7.2.1 Media cero de los residuos ## ## One Sample t-test ## ## data: residuals(modelo_arima) ## t = -0.029176, df = 648, p-value = 0.9767 ## alternative hypothesis: true mean is not equal to 0 ## 95 percent confidence interval: ## -125501.1 121826.3 ## sample estimates: ## mean of x ## -1837.392 Con este resultado se puede decir que no hay evidencia suficiente para rechazar la hipótesis nula de que la media de los residuos es 0. 3.7.2.2 Independencia de los residuos ## ## Box-Ljung test ## ## data: residuals(modelo_arima) ## X-squared = 23.707, df = 7, p-value = 0.001282 La prueba de Ljung-Box evalúa si los residuos del modelo ARIMA están autocorrelacionados. Esto es importante porque, idealmente, los residuos deberían comportarse como ruido blanco para indicar que el modelo ha capturado adecuadamente la estructura de la serie de tiempo. El p-valor es menor que 0.05, lo que sugiere que hay suficiente evidencia para rechazar la hipótesis nula de independencia de los residuos, indicando que los residuos del modelo aún presentan autocorrelación significativa en al menos uno de los primeros 7 rezagos. El test de Ljung-Box sugiere que aún queda información estructural en los residuos que el modelo no ha capturado. 3.7.2.3 Normalidad de los residuos ## ## Shapiro-Wilk normality test ## ## data: residuals(modelo_arima) ## W = 0.9336, p-value &lt; 2.2e-16 Gráfico Q-Q (Quantile-Quantile) Un valor p menor que 0.05 indica que se rechaza la hipótesis nula de normalidad, por lo que los residuos no siguen una distribución normal. Se debe buscar cual es la distribución de ajuste,se podría intentar una distribución t ya que es la más parecida visualmente tiene colas más pesadas que la normal, lo cual puede capturar mejor los valores extremos. "],["holt---winters.html", "4 HOLT - WINTERS 4.1 Visualizacion de la variación de los pagos a lo largo del tiempo 4.2 Definición y caracteristicas de la serie. 4.3 Gráfico de Caja (Boxplot) por Día de la Semana 4.4 Logaritmo de Monto en Dolares 4.5 Aplicacion del modelo Holt-Winter 4.6 Gráfico del Ajuste del Modelo de Holt-Winters 4.7 Gráfico de la Descomposición de Holt-Winters 4.8 Predicciones a partir del modelo de Holt-Winters 4.9 Funcion exponencial para regresar a la escala original.", " 4 HOLT - WINTERS ## Fecha_Pago Monto_USD ## 1 2023-01-01 314473.1 ## 2 2023-01-02 4700346.1 ## 3 2023-01-03 6069974.1 ## 4 2023-01-04 6164948.9 ## 5 2023-01-05 6986643.0 ## 6 2023-01-06 6616416.0 4.1 Visualizacion de la variación de los pagos a lo largo del tiempo 4.2 Definición y caracteristicas de la serie. ## Time Series: ## Start = c(2023, 1) ## End = c(2023, 20) ## Frequency = 365 ## [1] 314473.1 4700346.1 6069974.1 6164948.9 6986643.0 6616416.0 5392530.2 1368008.4 2248875.5 ## [10] 8307518.8 6546327.3 4509599.3 5737621.1 4668733.8 1329182.5 6681862.6 5926830.6 5664752.1 ## [19] 5235327.5 5645884.9 ## Min. 1st Qu. Median Mean 3rd Qu. Max. ## 314473 5737621 7045531 6599192 8074062 13866707 La serie de tiempo Datos_FP_ts muestra el comportamiento de los montos de pago en dólares registrados diariamente desde enero de 2023. Valor mínimo (Min): El monto más bajo registrado es de 314,473 USD. Primer cuartil (1st Qu.): El 25% de los montos registrados son menores o iguales a 5,732,341 USD. Mediana (Median): El valor central de la serie es 7,045,531 USD, lo que indica que la mitad de los montos son mayores o iguales a este valor y la otra mitad son menores. Media (Mean): El promedio de los montos es de 6,592,872 USD, lo cual está relativamente cerca de la mediana, sugiriendo que no hay una gran asimetría en los datos. Tercer cuartil (3rd Qu.): El 75% de los montos son menores o iguales a 8,074,062 USD. Valor máximo (Max): El monto máximo registrado es de 13,866,707 USD. 4.3 Gráfico de Caja (Boxplot) por Día de la Semana El gráfico de cajas muestra la distribución de los montos en dólares (Monto_USD) para cada día de la semana (Dia_semana). El es comparar los montos de pago en función del día de la semana para identificar variaciones, como si ciertos días tienden a tener pagos más altos o más bajos. En este caso, es notable que el dia domingo se registran valores mas bajos en comparación con los demas dias de la semana. 4.4 Logaritmo de Monto en Dolares El siguiente grafico permite visualizar la evolución de los pagos en el tiempo, facilitando la observación de cambios y patrones en la serie al suavizar la variabilidad de los datos. 4.5 Aplicacion del modelo Holt-Winter A continuación se utiliza una serie de tiempo transformada a escala logarítmica para aplicar el modelo de Holt-Winters para ajustar y descomponer la serie. Se aplica el modelo de Holt-Winters con un componente estacional aditivo (seasonal = “additive”) a la serie Datos_FP_ts2. El modelo de Holt-Winters es un método de suavizamiento exponencial que se utiliza para ajustar y pronosticar series de tiempo con componentes estacionales, tendencia y aleatoriedad. Estacionalidad aditiva: Se asume que los efectos estacionales son constantes y no dependen del nivel de la serie. 4.6 Gráfico del Ajuste del Modelo de Holt-Winters 4.7 Gráfico de la Descomposición de Holt-Winters 4.8 Predicciones a partir del modelo de Holt-Winters ## Time Series: ## Start = c(2115, 6) ## End = c(2117, 5) ## Frequency = 7 ## fit upr lwr ## 2115.714 16.11247 16.67379 15.55116 ## 2115.857 15.88674 16.44921 15.32427 ## 2116.000 14.82065 15.38429 14.25701 ## 2116.143 16.06530 16.63013 15.50048 ## 2116.286 16.14304 16.70907 15.57702 ## 2116.429 16.04815 16.61539 15.48092 ## 2116.571 16.03860 16.60707 15.47013 ## 2116.714 16.11858 16.70094 15.53623 ## 2116.857 15.89285 16.47643 15.30927 ## 2117.000 14.82676 15.41158 14.24194 ## 2117.143 16.07141 16.65749 15.48533 ## 2117.286 16.14915 16.73650 15.56181 ## 2117.429 16.05426 16.64289 15.46563 ## 2117.571 16.04471 16.63464 15.45478 La tabla muestra cómo el modelo de Holt-Winters estima las fluctuaciones diarias del monto en dólares en los próximos 14 días, reflejando una variabilidad ligera. Los intervalos ayudan a interpretar la predicción en función de su incertidumbre, lo que es clave para evaluar posibles escenarios en los valores futuros de los pagos. 4.9 Funcion exponencial para regresar a la escala original. ## fit upr lwr ## 1 9943942 17431463 5672615 ## 2 7934584 13925219 4521122 ## 3 2732295 4800806 1555038 ## 4 9485761 16686812 5392262 ## 5 10252623 18057469 5821207 ## 6 9324489 16442722 5287816 ## 7 9235823 16306363 5231113 ## 8 10004875 17911186 5588548 ## 9 7983204 14309453 4453807 ## 10 2749038 4933619 1531778 ## 11 9543886 17149655 5311230 ## 12 10315447 18559633 5733327 ## 13 9381626 16901167 5207623 ## 14 9292417 16762181 5151419 Esta salida muestra las predicciones y los intervalos de confianza de un modelo de serie de tiempo para el monto en dólares. Cada fila representa un día. fit: Valor predicho central en dólares. Es el valor estimado para el monto en este periodo. upr: Límite superior del intervalo de predicción en dólares. Representa el valor máximo esperado en ese intervalo, proporcionando un margen de incertidumbre hacia arriba. lwr: Límite inferior del intervalo de predicción en dólares. Indica el valor mínimo esperado, estableciendo el margen de incertidumbre hacia abajo. Este intervalo entre upr y lwr ayuda a entender la variabilidad y la confiabilidad de la predicción en cada periodo. "],["modelos-estacionarios.html", "5 MODELOS ESTACIONARIOS 5.1 METODOLOGÍA BOX-JENKINS 5.2 INCLUCIÓN DE VARIABLES EN EL TIEMPO Y AJUSTES A UN MODELO LINEAL Y ESTACIONARIO", " 5 MODELOS ESTACIONARIOS ## Fecha_Pago Monto_USD Dia_semana ## 1 2023-01-01 314473.1 dom ## 2 2023-01-02 4700346.1 lun ## 3 2023-01-03 6069974.1 mar ## 4 2023-01-04 6164948.9 mié ## 5 2023-01-05 6986643.0 jue ## 6 2023-01-06 6616416.0 vie 5.1 METODOLOGÍA BOX-JENKINS 5.1.1 Visualizacion de la serie 5.1.2 Verificación de estacionariedad ## ## Augmented Dickey-Fuller Test ## ## data: Datos_FP_ts ## Dickey-Fuller = -7.4395, Lag order = 8, p-value = 0.01 ## alternative hypothesis: stationary 5.1.3 Análisis ACF y PACF 5.1.4 Ajuste del modelo ## Series: serie_xtsp ## ARIMA(1,0,0)(2,1,0)[7] with drift ## ## Coefficients: ## ar1 sar1 sar2 drift ## 0.2815 -0.6143 -0.3077 5326.433 ## s.e. 0.0381 0.0377 0.0378 6623.015 ## ## sigma^2 = 2.614e+12: log likelihood = -10088.61 ## AIC=20187.21 AICc=20187.31 BIC=20209.54 ## ## Training set error measures: ## ME RMSE MAE MPE MAPE MASE ACF1 ## Training set -1837.392 1603135 1080672 -8.664026 21.83807 0.7725551 -0.03796145 5.1.5 Pronóstico ## Point Forecast Lo 80 Hi 80 Lo 95 Hi 95 ## 93.71429 9189632 7117496.1 11261768 6020573.7 12358690 ## 93.85714 7602795 5450134.5 9755456 4310584.8 10895005 ## 94.00000 2702625 543712.3 4861537 -599146.9 6004396 ## 94.14286 9665693 7506285.8 11825100 6363164.8 12968221 ## 94.28571 9868239 7708793.1 12027685 6565651.4 13170827 ## 94.42857 9326637 7167187.8 11486086 6024044.4 12629230 ## 94.57143 9242555 7083105.4 11402004 5939961.9 12545148 ## 94.71429 9558880 7256181.8 11861579 6037206.8 13080554 ## 94.85714 7797606 5483937.2 10111276 4259154.7 11336058 ## 95.00000 2817606 503069.5 5132142 -722172.0 6357383 ## 95.14286 9979586 7664980.6 12294190 6439702.8 13519468 ## 95.28571 10440257 8125646.5 12754867 6900365.8 13980148 5.2 INCLUCIÓN DE VARIABLES EN EL TIEMPO Y AJUSTES A UN MODELO LINEAL Y ESTACIONARIO 5.2.1 Creación de variables temporales a partir de la fecha de pago Se crean las variables Dia_Anio, Mes, Semana y Es_Fin_de_Semana 5.2.2 Verificacion de la misma cobertura de fechas de las dos fuentes. Para combinar datos adicionales con la serie de tiempo y usarlos como regresores en un modelo, es fundamental asegurarque los datos Datos_FP están correctamente alineados con el índice temporal de la serie Datos_FP_ts ## [1] &quot;2023-01-01&quot; &quot;2023-01-02&quot; &quot;2023-01-03&quot; &quot;2023-01-04&quot; &quot;2023-01-05&quot; &quot;2023-01-06&quot; ## [1] 2023 1 5.2.3 Agregar las variables al índice de la serie # Crear un índice de fechas para la serie Datos_FP$Fecha_Pago &lt;- as.Date(Datos_FP$Fecha_Pago) # Alinear la serie con las fechas de Datos_FP serie_alineada &lt;- ts(Datos_FP$Monto_USD, start = c(2023, 1), frequency = 365) 5.2.4 Unión de las variables adicionales # Fusionar la serie de tiempo con las variables adicionales library(dplyr) # Asegúrate de que las fechas de la serie correspondan a las de Datos_FP datos_combinados &lt;- Datos_FP %&gt;% mutate(Datos_FP_ts = serie_alineada) %&gt;% select(Fecha_Pago, Datos_FP_ts, Dia_Anio, Mes, Semana, Es_Fin_de_Semana) 5.2.5 Preparar Se extraen las columnas de las variables adicionales que se usaran como regresores usando xreg. 5.2.6 Ajuste del modelo ARIMAX Con los datos combinados y xreg. ## Series: serie_alineada ## Regression with ARIMA(2,1,1) errors ## ## Coefficients: ## ar1 ar2 ma1 drift Dia_Anio Mes Semana Es_Fin_de_Semana ## 0.1217 -0.0719 -0.9825 -5071.364 508013.18 1378990.9 -3795843.0 -3271475.3 ## s.e. 0.0503 0.0401 0.0088 1434.403 41625.64 227324.7 276384.4 143254.8 ## ## sigma^2 = 2.46e+12: log likelihood = -10161.16 ## AIC=20340.32 AICc=20340.6 BIC=20380.58 ## ## Training set error measures: ## ME RMSE MAE MPE MAPE MASE ACF1 ## Training set 22684.99 1557448 1151352 -11.23429 25.46899 0.439661 -0.0005504631 El resultado obtenido del ajuste del modelo ARIMA con variables exógenas (SARIMAX) proporciona varios indicadores y coeficientes: 5.2.7 Resumen de los Coeficientes: AR(1) y AR(2): Estos son los coeficientes del modelo autorregresivo (AR), que indican cómo los valores pasados de la serie temporal (el valor en el tiempo \\(t-1\\) y \\(t-2\\)) influyen en el valor actual. Los coeficientes son: \\(\\text{AR(1)} = 0.1203\\) \\(\\text{AR(2)} = -0.0724\\) Estos valores sugieren una relación débil entre los valores pasados de la serie temporal y el valor actual (dado que ambos coeficientes son relativamente pequeños). MA(1): Coeficiente del modelo de medias móviles; refleja cómo los errores pasados (residuos) afectan los valores actuales. El coeficiente es: \\(\\text{MA(1)} = -0.9823\\) Esto indica que los errores pasados tienen una fuerte influencia sobre la predicción actual. Drift: Este término representa una tendencia en los datos. Un valor negativo -5053.713 puede indicar que hay una tendencia decreciente a lo largo del tiempo. Variables exógenas: Dia_Anio: El coeficiente \\(506543.96\\) sugiere que el día del año tiene una relación positiva con la variable dependiente, aunque el valor es extremadamente grande, lo que podría indicar una escala incorrecta o un outlier en esos datos. Mes: El coeficiente \\(1409040.8\\) también es grande, lo que sugiere una fuerte influencia de la variable mes en la serie temporal. Semana: El coeficiente \\(-3792392.0\\) es negativo y bastante grande en valor absoluto, lo que implica que las semanas tienen un impacto considerable pero contrario al comportamiento de la variable dependiente. Es_Fin_de_Semana: El coeficiente \\(-3260731.8\\) indica que, si es fin de semana, la variable dependiente tiende a ser más baja (dado que es negativo). Errores estándar (s.e.): Los errores estándar asociados a cada coeficiente indican la variabilidad de las estimaciones. Si el coeficiente es mucho mayor que el error estándar, el coeficiente es más significativo. 5.2.8 Métricas del Modelo: \\(\\sigma^2 = 2.477e+12\\): Este es el estimado de la varianza del error (residual). Un valor muy grande podría sugerir que hay alta variabilidad en los residuos y que el modelo no captura toda la variabilidad en los datos. Log-likelihood = -10163.4: El logaritmo de la verosimilitud se utiliza para evaluar el ajuste del modelo. Un valor más alto (menos negativo) indica un mejor ajuste. AIC = 20344.79: El Akaike Information Criterion (AIC) penaliza la complejidad del modelo (número de parámetros) y ayuda a elegir el modelo más parsimonioso (el que ajusta bien pero con menos parámetros). En general, cuanto menor es el AIC, mejor es el modelo. AICc = 20345.07: Este es el AIC corregido para el tamaño de la muestra, lo cual es útil cuando el número de observaciones es pequeño en relación con el número de parámetros del modelo. BIC = 20385.06: El Bayesian Information Criterion (BIC) es similar al AIC, pero penaliza aún más la complejidad del modelo. Un valor más bajo es preferible. 5.2.9 Errores en el conjunto de entrenamiento: Las métricas del modelo sobre el conjunto de entrenamiento son importantes para evaluar el desempeño: - ME (Mean Error) = 22500.38: Es el error promedio, que muestra si el modelo tiene un sesgo sistemático. En este caso, un valor relativamente alto sugiere que el modelo puede tener un sesgo (tal vez está sobreestimando los valores). - RMSE (Root Mean Squared Error) = 1,562,845: Mide el error promedio entre los valores observados y los predichos. Es bastante alto, lo que sugiere que el modelo no está prediciendo con gran precisión. - MAE (Mean Absolute Error) = 1,154,910: Similar al RMSE, pero no toma en cuenta la dirección del error. También es bastante alto, lo que indica un ajuste no óptimo. - MPE (Mean Percentage Error) = -11.32: Este valor negativo sugiere que el modelo tiende a subestimar las predicciones en promedio. - MAPE (Mean Absolute Percentage Error) = 25.60: Es el error absoluto en términos porcentuales. En este caso, el modelo tiene un error del 25.6% en promedio, lo cual no es ideal, especialmente si el modelo se aplica en situaciones donde la precisión es crucial. - MASE (Mean Absolute Scaled Error) = 0.4386: Es una métrica que compara el desempeño del modelo con un modelo simple de referencia (como un modelo que siempre predice la media). Un valor menor a 1 indica que el modelo es mejor que el modelo de referencia. - ACF1 (Autocorrelation Function lag 1) = -0.0004: Indica la correlación entre los residuos en el primer retardo. Un valor cercano a cero sugiere que los residuos no están autocorrelacionados, lo cual es una buena señal. 5.2.10 Validación ## ## Ljung-Box test ## ## data: Residuals from Regression with ARIMA(2,1,1) errors ## Q* = 924.13, df = 127, p-value &lt; 2.2e-16 ## ## Model df: 3. Total lags used: 130 ## ar1 ar2 ma1 drift Dia_Anio ## 1.216667e-01 -7.194151e-02 -9.825185e-01 -5.071364e+03 5.080132e+05 ## Mes Semana Es_Fin_de_Semana ## 1.378991e+06 -3.795843e+06 -3.271475e+06 5.2.11 Ljung-Box test: Q* = 917.06, df = 127, p-value &lt; 2.2e-16: El Ljung-Box test se utiliza para verificar si hay autocorrelación en los residuos del modelo. Específicamente, prueba si los residuos están correlacionados en un conjunto de retardos (lags). Q* = 917.06: Este es el estadístico de prueba, que mide la cantidad de autocorrelación en los residuos. df = 127: Los grados de libertad del test, que se corresponden con los retardos que se han usado en la prueba. En este caso, se han utilizado 130 retardos para evaluar la autocorrelación. p-value &lt; 2.2e-16: El valor p es extremadamente pequeño, lo que indica que hay evidencia significativa de autocorrelación en los residuos. En otras palabras, el modelo no está capturando toda la estructura temporal de los datos. El Ljung-Box test con un valor p tan bajo (casi igual a cero) indica que los residuos del modelo no son completamente aleatorios y contienen patrones de autocorrelación no capturados por el modelo. Esto sugiere que el modelo ARIMAX(2,1,1) no es totalmente adecuado para los datos, y probablemente hay alguna estructura temporal en los residuos que el modelo no ha logrado ajustar. 5.2.12 Pronóstico con regresores adicionales. Al realizar pronósticos, es necesario generar valores futuros para los regresores: "],["modelo-prophet.html", "6 MODELO PROPHET 6.1 Datos 6.2 Modelo ARIMA 6.3 Evaluación de residuos 6.4 Predicción", " 6 MODELO PROPHET Una propuesta reciente es el modelo Prophet, disponible a través del paquete fable.prophet. Este modelo fue introducido por Facebook (S. J. Taylor &amp; Letham, 2018), originalmente para pronosticar datos diarios con estacionalidad semanal y anual, además de efectos de vacaciones. Más tarde se amplió para cubrir más tipos de datos estacionales. Funciona mejor con series temporales que tienen una fuerte estacionalidad y varias temporadas de datos históricos. 6.1 Datos Con el objetivo de realizar el ejercicio planteado se utilizará la serie de montos en dolares de remesas por fecha de pago y la tasa representativa del mercado cambiario para Colombia. ## Fecha_Pago Monto_USD TRM ## 1 2023-01-01 314473.1 4765.92 ## 2 2023-01-02 4700346.1 4765.92 ## 3 2023-01-03 6069974.1 4765.92 ## 4 2023-01-04 6164948.9 4842.26 ## 5 2023-01-05 6986643.0 4924.00 ## 6 2023-01-06 6616416.0 4989.58 Se verifica el tipo de variable de los datos ## &#39;data.frame&#39;: 649 obs. of 3 variables: ## $ Fecha_Pago: POSIXct, format: &quot;2023-01-01&quot; &quot;2023-01-02&quot; &quot;2023-01-03&quot; ... ## $ Monto_USD : num 314473 4700346 6069974 6164949 6986643 ... ## $ TRM : num 4766 4766 4766 4842 4924 ... Inicialmente se verifica la estacionariedad de las variables Monto USD y TRM. ## Prueba ADF para Monto_USD: ## ## Augmented Dickey-Fuller Test ## ## data: Monto_USD_ts ## Dickey-Fuller = -7.4395, Lag order = 8, p-value = 0.01 ## alternative hypothesis: stationary ## ## Prueba ADF para TRM: ## ## Augmented Dickey-Fuller Test ## ## data: TRM_ts ## Dickey-Fuller = -1.6842, Lag order = 8, p-value = 0.712 ## alternative hypothesis: stationary Una vez verificado que ambas series son estacionarias, se procede a graficarlas en el tiempo, 6.2 Modelo ARIMA ## Series: Monto_USD ## Model: LM w/ ARIMA(1,0,1)(0,1,1)[7] errors ## ## Coefficients: ## ar1 ma1 sma1 TRM ## 0.8120 -0.5946 -0.9240 1072.2519 ## s.e. 0.0678 0.0849 0.0188 697.0625 ## ## sigma^2 estimated as 1.976e+12: log likelihood=-10003.67 ## AIC=20017.34 AICc=20017.43 BIC=20039.66 Ecuación general: \\(\\text{Monto_USD}_t = \\beta_0 + \\beta_{\\text{TRM}} \\cdot \\text{TRM}_t + \\epsilon_t\\) Relación entre Monto_USD y TRM: El coeficiente de TRM sugiere una relación positiva lo que significa que a medida que aumenta el TRM, también lo hace el monto en dólares. Tiene un error estándar alto, indicando que el modelo puede no estar capturando toda la variabilidad en los datos. La varianza del error residual es alto lo que puede indicar una alta variabilidad en los datos que el modelo no está explicando bien. 6.3 Evaluación de residuos ## # A tibble: 1 × 3 ## .model lb_stat lb_pvalue ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 ARIMA(Monto_USD ~ TRM) 3.27 0.352 Dado que el p valor es superior a 0.05, no hay suficiente evidencia para rechazar la hipotesis nula, lo que significa que los residuos del modelo ARIMA no tienen autocorrelación significativa hasta el lag 8. Los residuos son consistentes con ruido blanco, lo que sugiere que el modelo captura adecuadamente las dependencias temporales en los datos. 6.4 Predicción "]]
